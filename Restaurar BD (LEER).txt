DROP TABLE IF EXISTS ACCESO CASCADE;
CREATE TABLE IF NOT EXISTS ACCESO(
ID_ACCESO SERIAL,
EMAIL VARCHAR(50),
CLAVE VARCHAR (256),
CONSTRAINT PK_ACCESO PRIMARY KEY (ID_ACCESO),
CONSTRAINT NN_DOCUMENTO CHECK (EMAIL IS NOT NULL),
CONSTRAINT NN_CONTRASENA CHECK (CLAVE IS NOT NULL)
);

DROP TABLE IF EXISTS TIPO_EMPLEADO CASCADE;
CREATE TABLE IF NOT EXISTS TIPO_EMPLEADO(
ID_TIPO_EMPLEADO SERIAL,
NOMBRE_TIEM VARCHAR (15),
CARGO VARCHAR (20),
CONSTRAINT PK_ID_TIPO_EMPLEADO PRIMARY KEY (ID_TIPO_EMPLEADO),
CONSTRAINT UC_ID_TIPO_EMPLEADO UNIQUE (ID_TIPO_EMPLEADO),
CONSTRAINT NN_NOMBRE_TIEM CHECK (NOMBRE_TIEM IS NOT NULL),
CONSTRAINT NN_CARGO CHECK (CARGO IS NOT NULL)
);

DROP TABLE IF EXISTS PROVEEDOR CASCADE;
CREATE TABLE IF NOT EXISTS PROVEEDOR(
ID_PROVEEDOR SERIAL,
NOMBRE_VENT VARCHAR (50),
DIRECCION_VENT VARCHAR (12),
TELEFONO_VENT VARCHAR (30),
CONSTRAINT PK_ID_PROVEEDOR PRIMARY KEY (ID_PROVEEDOR),
CONSTRAINT NN_DIRECCION CHECK (DIRECCION_VENT IS NOT NULL),
CONSTRAINT NN_TELEFONO CHECK (TELEFONO_VENT IS NOT NULL),
CONSTRAINT NOMBRE_VENT CHECK (NOMBRE_VENT IS NOT NULL)
);

DROP TABLE IF EXISTS CLIENTE CASCADE;
CREATE TABLE IF NOT EXISTS CLIENTE(
DOCUMENTO_CLI VARCHAR (15),
NOMBRE1_CLI VARCHAR (20),
NOMBRE2_EMP VARCHAR (20),
APELLIDO1_CLI VARCHAR (20),
APELLIDO2_CLI VARCHAR (20),
DIRECCION_CLI VARCHAR (20),
TELEFONO_CLI VARCHAR (20),
CONSTRAINT PK_DOCUMENTO_CLI PRIMARY KEY (DOCUMENTO_CLI),
CONSTRAINT UC_DOCUMENTO_CLI UNIQUE (DOCUMENTO_CLI),
CONSTRAINT NN_NOMBRE_CLI CHECK (NOMBRE1_CLI IS NOT NULL),
CONSTRAINT NN_APELLIDO_CLI CHECK (APELLIDO1_CLI IS NOT NULL),
CONSTRAINT NN_DOCUMENTO_CLI CHECK (DOCUMENTO_CLI IS NOT NULL),
CONSTRAINT NN_TELEFONO_CLI CHECK (TELEFONO_CLI IS NOT NULL),
CONSTRAINT NN_DIRECCION_CLI CHECK (DIRECCION_CLI IS NOT NULL)
);

DROP TABLE IF EXISTS EMPLEADO CASCADE;
CREATE TABLE IF NOT EXISTS EMPLEADO(
ID_EMPLEADO SERIAL,
ID_ACCESO INTEGER,
ID_TIPO_EMPLEADO INTEGER,
DOCUMENTO_EMP VARCHAR (15),
NOMBRE1_EMP VARCHAR (20),
NOMBRE2_EMP VARCHAR (20),
APELLIDO1_EMP VARCHAR (20),
APELLIDO2_EMP VARCHAR (20),
CARGO_EMP VARCHAR (20),
TELEFONO_EMP VARCHAR (20),
CONSTRAINT PK_EMPLEADO PRIMARY KEY (ID_EMPLEADO),
CONSTRAINT UC_ID_EMPLEADO UNIQUE (ID_EMPLEADO),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE1_EMP IS NOT NULL),
CONSTRAINT NN_APELLIDO CHECK (APELLIDO1_EMP IS NOT NULL),
CONSTRAINT NN_DOCUMENTO CHECK (DOCUMENTO_EMP IS NOT NULL),
CONSTRAINT NN_ID_ACCESO CHECK (ID_ACCESO IS NOT NULL),
CONSTRAINT NN_TELEFONO_EMP CHECK (TELEFONO_EMP IS NOT NULL),
CONSTRAINT FK_ID_ACCESO FOREIGN KEY (ID_ACCESO)
REFERENCES ACCESO (ID_ACCESO),
CONSTRAINT FK_ID_TIPO_EMPLEADO FOREIGN KEY (ID_TIPO_EMPLEADO)
REFERENCES TIPO_EMPLEADO (ID_TIPO_EMPLEADO)
);


DROP TABLE IF EXISTS PRODUCTO CASCADE;
CREATE TABLE IF NOT EXISTS PRODUCTO(
ID_EMPLEADO INTEGER,
CODIGO_PRO VARCHAR (4),
NOMBRE_PRO VARCHAR (50),
PRECIOUNIT_PRO INTEGER,
STOCK_PRO INTEGER,
DESCRIPCION_PRO VARCHAR (50),
CONSTRAINT PK_CODIGO_PRO PRIMARY KEY (CODIGO_PRO),
CONSTRAINT NN_CODIGO CHECK (CODIGO_PRO IS NOT NULL),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE_PRO IS NOT NULL),
CONSTRAINT PRECIOUNIT_PRO CHECK (PRECIOUNIT_PRO IS NOT NULL),
CONSTRAINT STOCK_PRO CHECK (STOCK_PRO IS NOT NULL),
CONSTRAINT DESCRIPCION_PRO CHECK (DESCRIPCION_PRO IS NOT NULL),
CONSTRAINT FK_EMPLEADO_PRODUCTO FOREIGN KEY (ID_EMPLEADO)
REFERENCES EMPLEADO (ID_EMPLEADO)
);


DROP TABLE IF EXISTS VENTA CASCADE;
CREATE TABLE IF NOT EXISTS VENTA(
ID_VENTA SERIAL,
ID_EMPLEADO INTEGER,
ID_PROVEEDOR INTEGER,
OBSERVACIONES_VENT VARCHAR (50),
TOTAL_VENT VARCHAR (12),
FECHA_VENT VARCHAR (30),
CONSTRAINT PK_ID_VENTA PRIMARY KEY (ID_VENTA),
CONSTRAINT NN_TOTAL CHECK (TOTAL_VENT IS NOT NULL),
CONSTRAINT NN_FECHA CHECK (FECHA_VENT IS NOT NULL),
CONSTRAINT OBSERVACIONES_VENT CHECK (OBSERVACIONES_VENT IS NOT NULL),
CONSTRAINT FK_EMPLEADO_PRODUCTO FOREIGN KEY (ID_EMPLEADO)
REFERENCES EMPLEADO (ID_EMPLEADO)
);


DROP TABLE IF EXISTS DETALLE_COMPRA CASCADE;
CREATE TABLE IF NOT EXISTS DETALLE_COMPRA(
ID_PROVEEDOR INTEGER,
CODIGO_PRO VARCHAR (4),
PRECIO_COMP VARCHAR (50),
DESCRIPCION_COMP VARCHAR (12),
STOK_COMP VARCHAR (30),
FECHA_COMP VARCHAR (12),
NUMERO_FACTURA_COMP VARCHAR (30),
CONSTRAINT PK_DETALLE_COMPRA PRIMARY KEY (ID_PROVEEDOR,CODIGO_PRO),
CONSTRAINT NN_ID_PROVEEDOR CHECK (ID_PROVEEDOR IS NOT NULL),
CONSTRAINT NN_CODIGO_PRO CHECK (CODIGO_PRO IS NOT NULL),
CONSTRAINT NN_PRECIO_COMP CHECK (PRECIO_COMP IS NOT NULL),
CONSTRAINT NN_DESCRIPCION_COMP CHECK (DESCRIPCION_COMP IS NOT NULL),
CONSTRAINT NN_STOK_COMP CHECK (STOK_COMP IS NOT NULL),
CONSTRAINT NN_FECHA_COMP CHECK (FECHA_COMP IS NOT NULL),
CONSTRAINT NN_NUMERO_FACTURA_COMP CHECK (NUMERO_FACTURA_COMP IS NOT NULL),
CONSTRAINT FK_ID_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR)
REFERENCES PROVEEDOR (ID_PROVEEDOR),
CONSTRAINT FK_CODIGO_PRODUCTO FOREIGN KEY (CODIGO_PRO)
REFERENCES PRODUCTO (CODIGO_PRO)
);

DROP TABLE IF EXISTS INVENTARIO CASCADE;
CREATE TABLE IF NOT EXISTS INVENTARIO(
ID_INVENTARIO SERIAL,
ID_PROVEEDOR INTEGER,
CODIGO_PRO VARCHAR (4),
NOMBRE_INVE VARCHAR (50),
STOCK_INVE VARCHAR (12),
STOCK_BEFORE_INVE VARCHAR (12),
DESCRIPCION_INVE VARCHAR (30),
CONSTRAINT PK_ID_INVENTARIO PRIMARY KEY (ID_INVENTARIO,ID_PROVEEDOR,CODIGO_PRO),
CONSTRAINT NN_STOCK_INVE CHECK (STOCK_INVE IS NOT NULL),
CONSTRAINT NN_STOCK_BEFORE_INVE CHECK (STOCK_BEFORE_INVE IS NOT NULL),
CONSTRAINT NN_DESCRIPCION_INVE CHECK (DESCRIPCION_INVE IS NOT NULL),
CONSTRAINT NOMBRE_INVE CHECK (NOMBRE_INVE IS NOT NULL),
CONSTRAINT FK_PROVEEDOR_PRODUCTO FOREIGN KEY (ID_PROVEEDOR)
REFERENCES PROVEEDOR (ID_PROVEEDOR),
CONSTRAINT FK_CODIGO_PRO FOREIGN KEY (CODIGO_PRO)
REFERENCES PRODUCTO (CODIGO_PRO)
);

DROP TABLE IF EXISTS DETALLE_VENTA CASCADE;
CREATE TABLE IF NOT EXISTS DETALLE_VENTA(
ID_VENTA INTEGER,
DOCUMENTO_CLI VARCHAR (15),
NOMBRE_PRO VARCHAR (12),
SUB_TOTAL_COMP VARCHAR (50),
DESCRIPCION_COMP VARCHAR (12),
STOK_COMP VARCHAR (30),
CONSTRAINT PK_DETALLE_VENTA PRIMARY KEY (ID_VENTA,DOCUMENTO_CLI),
CONSTRAINT NN_ID_VENTA CHECK (ID_VENTA IS NOT NULL),
CONSTRAINT NN_DOCUMENTO_CLI CHECK (DOCUMENTO_CLI IS NOT NULL),
CONSTRAINT NN_SUB_TOTAL_COMP CHECK (SUB_TOTAL_COMP IS NOT NULL),
CONSTRAINT NN_DESCRIPCION_COMP CHECK (DESCRIPCION_COMP IS NOT NULL),
CONSTRAINT NN_STOK_COMP CHECK (STOK_COMP IS NOT NULL),
CONSTRAINT NN_NOMBRE_PRO CHECK (NOMBRE_PRO IS NOT NULL),
CONSTRAINT FK_ID_VENTA FOREIGN KEY (ID_VENTA)
REFERENCES VENTA (ID_VENTA),
CONSTRAINT FK_DOCUMENTO_CLI FOREIGN KEY (DOCUMENTO_CLI)
REFERENCES CLIENTE (DOCUMENTO_CLI)
);


